<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ToDoãƒªã‚¹ãƒˆåŸºæœ¬è¨­è¨ˆUIã‚¤ãƒ¡ãƒ¼ã‚¸</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; background-color: #f4f4f4; }
        .container { max-width: 600px; margin: auto; background: white; padding: 20px; border-radius: 8px; box-shadow: 0 0 10px rgba(0, 0, 0, 0.1); }
        h1 { border-bottom: 2px solid #ccc; padding-bottom: 10px; margin-bottom: 20px; }
        button { padding: 8px 15px; border: none; border-radius: 4px; cursor: pointer; margin-right: 5px; }
        .primary { background-color: #007bff; color: white; }
        .danger { background-color: #dc3545; color: white; }
        .success { background-color: #28a745; color: white; }

        /* ã‚¿ã‚¹ã‚¯ä¸€è¦§ã®ã‚¹ã‚¿ã‚¤ãƒ« */
        .task-list { list-style: none; padding: 0; }
        .task-list li { display: flex; justify-content: space-between; align-items: center; padding: 10px 0; border-bottom: 1px dashed #eee; }
        .completed { text-decoration: line-through; color: #888; }

        /* ãƒ•ã‚©ãƒ¼ãƒ ã®ã‚¹ã‚¿ã‚¤ãƒ« */
        label { display: block; margin-top: 10px; font-weight: bold; }
        input[type="text"], input[type="date"] { width: 90%; padding: 8px; margin-top: 5px; border: 1px solid #ccc; border-radius: 4px; }
        .error { color: #dc3545; margin-top: 5px; }
    </style>
</head>
<body>
    <div class="container">
        <h1>ToDoãƒªã‚¹ãƒˆæ©Ÿèƒ½</h1>

        <div id="message" style="color: #28a745; font-weight: bold; margin-bottom: 15px;"></div>

        <div id="listView">
            <button class="primary" onclick="showRegisterView()">+ ã‚¿ã‚¹ã‚¯ç™»éŒ²</button>

            <h2>æœªå®Œäº†ã‚¿ã‚¹ã‚¯</h2>
            <ul class="task-list" id="todoList"> 
                <li>
                    <span>**è³‡æ–™ä½œæˆ** (æœŸæ—¥: 2025/10/15)</span>
                    <div>
                        <button class="success" onclick="markComplete(this)">å®Œäº†</button>
                        <button class="danger">å‰Šé™¤</button>
                    </div>
                </li>
                <li>
                    <span>**ã€‡ã€‡éƒ¨é•·ã¸ãƒ¡ãƒ¼ãƒ«** (æœŸæ—¥: ãªã—)</span>
                    <div>
                        <button class="success" onclick="markComplete(this)">å®Œäº†</button>
                        <button class="danger">å‰Šé™¤</button>
                    </div>
                </li>
            </ul>

            <hr style="margin: 20px 0;">

            <h2>å®Œäº†ã‚¿ã‚¹ã‚¯</h2>
            <ul class="task-list" id="completedList">
                <li class="completed">
                    <span>æœä¼šã«å‚åŠ </span>
                    <div>
                        </div>
                </li>
            </ul>
        </div>

        <div id="registerView" style="display: none;">
            <h2>æ–°è¦ã‚¿ã‚¹ã‚¯ç™»éŒ²</h2>
            <form id="taskForm">
                <label for="taskName">ã‚¿ã‚¹ã‚¯å <span style="color:red;">(å¿…é ˆ)</span>:</label>
                <input type="text" id="taskName" name="taskName" required>
                <div id="nameError" class="error"></div>

                <label for="dueDate">æœŸæ—¥ (ä»»æ„):</label>
                <input type="date" id="dueDate" name="dueDate">

                <div style="margin-top: 20px;">
                    <button type="submit" class="primary">ç™»éŒ²</button>
                    <button type="button" onclick="showListView()">ã‚­ãƒ£ãƒ³ã‚»ãƒ«</button>
                </div>
            </form>
        </div>
    </div>

    <script>
        const listView = document.getElementById('listView');
        const registerView = document.getElementById('registerView');
        const taskForm = document.getElementById('taskForm');
        const taskNameInput = document.getElementById('taskName');
        const nameError = document.getElementById('nameError');
        const message = document.getElementById('message');
        
        // ğŸ’¡ ä¿®æ­£ç®‡æ‰€: æ–°ã—ã„ã‚¿ã‚¹ã‚¯ã‚’è¿½åŠ ã™ã‚‹ãŸã‚ã®DOMè¦ç´ ã‚’å–å¾—
        const todoList = document.getElementById('todoList'); 
        const completedList = document.getElementById('completedList');


        // ç”»é¢é·ç§»å›³ (3.) ã®å®Ÿè£…
        function showRegisterView() {
            listView.style.display = 'none';
            registerView.style.display = 'block';
            message.textContent = ''; // ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’ã‚¯ãƒªã‚¢
            nameError.textContent = ''; // ã‚¨ãƒ©ãƒ¼ã‚’ã‚¯ãƒªã‚¢
            taskForm.reset(); // ãƒ•ã‚©ãƒ¼ãƒ ã‚’ãƒªã‚»ãƒƒãƒˆ
        }

        function showListView(msg = '') {
            listView.style.display = 'block';
            registerView.style.display = 'none';
            message.textContent = msg;
            nameError.textContent = ''; // ã‚¨ãƒ©ãƒ¼ã‚’ã‚¯ãƒªã‚¢
        }

        // ğŸ’¡ è¿½åŠ é–¢æ•°: æ–°ã—ã„ã‚¿ã‚¹ã‚¯ã‚’ãƒªã‚¹ãƒˆã«è¿½åŠ ã™ã‚‹å‡¦ç†
        function addTaskToList(taskName, dueDate) {
            const li = document.createElement('li');
            let dateText = dueDate ? `(æœŸæ—¥: ${dueDate})` : '(æœŸæ—¥: ãªã—)';
            
            li.innerHTML = `
                <span>**${taskName}** ${dateText}</span>
                <div>
                    <button class="success" onclick="markComplete(this)">å®Œäº†</button>
                    <button class="danger">å‰Šé™¤</button>
                </div>
            `;
            // æœªå®Œäº†ã‚¿ã‚¹ã‚¯ã®ãƒªã‚¹ãƒˆã®å…ˆé ­ã«è¿½åŠ 
            todoList.prepend(li);
        }

        // æ©Ÿèƒ½è©³ç´° (4.2.) ã®å®Ÿè£… (ã‚¿ã‚¹ã‚¯ç™»éŒ²) - ä¿®æ­£ç‰ˆ
        taskForm.addEventListener('submit', function(event) {
            event.preventDefault(); // ãƒ•ã‚©ãƒ¼ãƒ ã®é€ä¿¡ã‚’ä¸€æ—¦åœæ­¢

            const taskName = taskNameInput.value.trim();
            const dueDate = document.getElementById('dueDate').value;

            // å…¥åŠ›ãƒã‚§ãƒƒã‚¯ (å‡¦ç† 1.)
            if (taskName === '') {
                nameError.textContent = 'ã‚¿ã‚¹ã‚¯åã¯å¿…é ˆã§ã™ã€‚';
                return;
            }

            // ğŸ’¡ ä¿®æ­£ç®‡æ‰€: ç™»éŒ²æ™‚ã«ä¸€è¦§ã¸ã‚¿ã‚¹ã‚¯ã‚’è¿½åŠ 
            addTaskToList(taskName, dueDate);
            
            taskForm.reset(); // ãƒ•ã‚©ãƒ¼ãƒ ã‚’ãƒªã‚»ãƒƒãƒˆ
            showListView('âœ… ã‚¿ã‚¹ã‚¯ã‚’ç™»éŒ²ã—ã¾ã—ãŸ'); // å‡ºåŠ› (ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸è¡¨ç¤ºã¨ä¸€è¦§ç”»é¢ã¸é·ç§»)
        });

        // æ©Ÿèƒ½è©³ç´° (4.3.) ã®å®Ÿè£… (ã‚¿ã‚¹ã‚¯å®Œäº†å‡¦ç†)
        function markComplete(buttonElement) {
            const listItem = buttonElement.closest('li');
            
            // å‡¦ç† (2.) ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®ã€ŒçŠ¶æ…‹ã€ã‚’ã€Œå®Œäº†ã€ã«æ›´æ–°
            listItem.classList.add('completed');
            
            // å®Œäº†ãƒœã‚¿ãƒ³ã¨å‰Šé™¤ãƒœã‚¿ãƒ³ã‚’éè¡¨ç¤ºã«ã™ã‚‹
            buttonElement.parentNode.innerHTML = ''; 
            
            // ğŸ’¡ è¿½åŠ å‡¦ç†: å®Œäº†ãƒªã‚¹ãƒˆã¸ç§»å‹•ã•ã›ã‚‹ (è¡¨ç¤ºä¸Šã®ã‚½ãƒ¼ãƒˆå‡¦ç†ã‚’ç°¡æ˜“çš„ã«å†ç¾)
            completedList.prepend(listItem);


            // å‡ºåŠ› (ä¸€è¦§ç”»é¢ã®æ›´æ–°)
            message.textContent = 'âœ… ã‚¿ã‚¹ã‚¯ã‚’å®Œäº†çŠ¶æ…‹ã«æ›´æ–°ã—ã¾ã—ãŸ';
        }
    </script>
</body>
</html>